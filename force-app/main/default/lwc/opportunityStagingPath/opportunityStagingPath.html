<template>
	<template if:true={showSpinner}>
        <lightning-spinner alternative-text="Loading" variant="brand"></lightning-spinner>
    </template>
	<div class="card">
		<div>
				<lightning-icon icon-name={iconName} onclick={handleClickIcon} class="slds-box" data-name="keyFieldIcon" alternative-text="Connected" size="x-small" title="small size">
        		</lightning-icon>
		</div>
		<div class="path_section">
				<div class="slds-card__body slds-card__body_inner">
							<div class="slds-path">
								<div class="slds-grid slds-path__track">
									<div class="slds-grid slds-path__scroller-container">
										<div class="slds-path__scroller" role="application">
											<div class="slds-path__scroller_inner">
												<ul class="slds-path__nav" role="listbox" aria-orientation="horizontal" aria-labelledby="slds-path__stage-name">
													<template if:true={opportunityPicklistValues}>
														<template for:each={opportunityPicklistValues} for:item="item">
														<li data-id={item.value} onclick={handleSelect} key={item.value} class="slds-path__item slds-is-incomplete" role="presentation">
														<a aria-selected="false" class="slds-path__link" href="#" id="path-6" role="option" tabindex="-1">
															<span class="slds-path__stage">
															<lightning-icon icon-name="utility:check" alternative-text="Warning!" variant="inverse" size="x-small"></lightning-icon>
															<span class="slds-assistive-text">Current Stage</span>
															</span>
															<span class="slds-path__title">{item.label}</span>
														</a>
														</li>
													</template>
													</template>
												</ul>
											</div>
										</div>
									</div>
									<div class="slds-grid slds-path__action">
										<button class="slds-button slds-button_brand slds-path__mark-complete" onclick={handleMarkAsSelected}>
											<lightning-icon icon-name="utility:check" alternative-text="Warning!" variant="inverse" size="x-small"></lightning-icon> &nbsp;
											Mark Status as Complete
										</button>
									</div>
								</div>
							</div>
				</div>
				<template if:true={showKeyDetails}>
				<c-opportunity-key-details selected-stage={selectedValue} record-data={recordData} record-id={recordId} object-api-name="Opportunity"></c-opportunity-key-details>
				</template>
		</div>	
		
	</div >
	
    <template if:true={isModalOpen}>
        <c-opportunity-exit-criteria record-id={recordId} selected-stage={selectedValue}  record-data={recordData} onclose={closeModal} onsave={handleSubmitExitCriteria}></c-opportunity-exit-criteria>
    </template>
    
</template>